{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rphl/Projects/XWordsApp/crosswords/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rphl/Projects/XWordsApp/crosswords/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rphl/Projects/XWordsApp/crosswords/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import useGlobalState from'../utils/useGlobalState';import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var pkg=require('../../package.json');function OwnGrids(){var globalState=useGlobalState();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];var _globalState$user=globalState.user,username=_globalState$user.username,api_token=_globalState$user.api_token;var loadGrids=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var r,_list;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(process.env.REACT_APP_API_URL+'/user/'+username,{method:'GET',credentials:'omit',headers:{'Authorization':'Token '+api_token,'Content-Type':'application/json'}});case 3:r=_context.sent;_context.next=6;return r.json();case 6:_list=_context.sent;setList(_list.crosswords_grids);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);window.location='/';case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function loadGrids(){return _ref.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return loadGrids();case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},_callee2);}))();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"container main-container\",children:!!list.length?list.map(function(e){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{width:'100%'},children:[e.published?/*#__PURE__*/_jsx(Link,{to:\"/grille/\"+e.id,children:e.title}):e.title,\" \",/*#__PURE__*/_jsx(Link,{to:\"/grille/\"+e.id+'/modifier',children:/*#__PURE__*/_jsx(\"button\",{class:\"float-right btn btn-primary\",children:\"Modifier\"})})]}),/*#__PURE__*/_jsxs(\"span\",{children:[e.width,\"x\",e.height,\" \",e.published&&/*#__PURE__*/_jsx(\"span\",{class:\"badge bg-danger\",children:\"publi\\xE9\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Cr\\xE9\\xE9e \",new Date(e.creation_date).toLocaleDateString(\"fr-FR\")]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Modifi\\xE9e \",new Date(e.modification_date).toLocaleDateString(\"fr-FR\")]})]}),/*#__PURE__*/_jsx(\"hr\",{})]});}):/*#__PURE__*/_jsx(\"h2\",{children:\"Pas de grilles\"})});}export default OwnGrids;","map":{"version":3,"sources":["/Users/rphl/Projects/XWordsApp/crosswords/frontend/src/components/ownGrids.js"],"names":["React","useEffect","useState","useGlobalState","Link","pkg","require","OwnGrids","globalState","list","setList","user","username","api_token","loadGrids","fetch","process","env","REACT_APP_API_URL","method","credentials","headers","r","json","crosswords_grids","window","location","length","map","e","width","published","id","title","height","Date","creation_date","toLocaleDateString","modification_date"],"mappings":"wfAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,cAAP,KAA2B,yBAA3B,CACA,OAASC,IAAT,KAAqB,kBAArB,C,6IACA,GAAMC,CAAAA,GAAG,CAAGC,OAAO,CAAC,oBAAD,CAAnB,CAGA,QAASC,CAAAA,QAAT,EAAoB,CAChB,GAAMC,CAAAA,WAAW,CAAGL,cAAc,EAAlC,CADgB,cAEQD,QAAQ,CAAC,EAAD,CAFhB,wCAETO,IAFS,eAEHC,OAFG,qCAGgBF,WAAW,CAACG,IAH5B,CAGRC,QAHQ,mBAGRA,QAHQ,CAGEC,SAHF,mBAGEA,SAHF,CAKhB,GAAMC,CAAAA,SAAS,0FAAG,qLAEMC,CAAAA,KAAK,CAACC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,CAA8B,QAA9B,CAAuCN,QAAxC,CAAiD,CAClEO,MAAM,CAAE,KAD0D,CAElEC,WAAW,CAAE,MAFqD,CAGlEC,OAAO,CAAE,CACL,gBAAiB,SAAWR,SADvB,CAEL,eAAgB,kBAFX,CAHyD,CAAjD,CAFX,QAEJS,CAFI,qCAUSA,CAAAA,CAAC,CAACC,IAAF,EAVT,QAUJd,KAVI,eAWVC,OAAO,CAACD,KAAI,CAACe,gBAAN,CAAP,CAXU,iFAaVC,MAAM,CAACC,QAAP,CAAkB,GAAlB,CAbU,qEAAH,kBAATZ,CAAAA,SAAS,0CAAf,CAiBAb,SAAS,CAAC,UAAI,CACV,wDAAC,+JAAmBa,CAAAA,SAAS,EAA5B,iHAAD,KACH,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACI,YAAK,SAAS,CAAC,0BAAf,UACM,CAAC,CAACL,IAAI,CAACkB,MAAP,CAAiBlB,IAAI,CAACmB,GAAL,CAAU,SAAAC,CAAC,qBAC1B,wCAAE,aAAK,KAAK,CAAE,CAACC,KAAK,CAAE,MAAR,CAAZ,wBACE,YAAI,KAAK,CAAE,CAACA,KAAK,CAAE,MAAR,CAAX,WAA6BD,CAAC,CAACE,SAAF,cAAc,KAAC,IAAD,EAAM,EAAE,CAAE,WAAWF,CAAC,CAACG,EAAvB,UAA4BH,CAAC,CAACI,KAA9B,EAAd,CAA4DJ,CAAC,CAACI,KAA3F,kBAAkG,KAAC,IAAD,EAAM,EAAE,CAAE,WAAWJ,CAAC,CAACG,EAAb,CAAgB,WAA1B,uBAAuC,eAAQ,KAAK,CAAC,6BAAd,sBAAvC,EAAlG,GADF,cAEE,wBAAOH,CAAC,CAACC,KAAT,KAAiBD,CAAC,CAACK,MAAnB,KAA4BL,CAAC,CAACE,SAAF,eAAe,aAAM,KAAK,CAAC,iBAAZ,uBAA3C,GAFF,cAEgG,aAFhG,cAGE,uCAAc,GAAII,CAAAA,IAAJ,CAASN,CAAC,CAACO,aAAX,CAAD,CAA4BC,kBAA5B,CAA+C,OAA/C,CAAb,GAHF,cAG8E,aAH9E,cAIE,uCAAiB,GAAIF,CAAAA,IAAJ,CAASN,CAAC,CAACS,iBAAX,CAAD,CAAgCD,kBAAhC,CAAmD,OAAnD,CAAhB,GAJF,GAAF,cAMA,aANA,GAD0B,EAAX,CAAjB,cASI,sCAVV,EADJ,CAeH,CAED,cAAe9B,CAAAA,QAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport useGlobalState from '../utils/useGlobalState'\nimport { Link } from \"react-router-dom\";\nconst pkg = require('../../package.json')\n\n\nfunction OwnGrids() {\n    const globalState = useGlobalState()\n    const [list, setList] = useState('')\n    const { username, api_token } = globalState.user\n\n    const loadGrids = async () => {\n        try {\n            const r = await fetch(process.env.REACT_APP_API_URL+'/user/'+username,{\n                method: 'GET',\n                credentials: 'omit',\n                headers: {\n                    'Authorization': 'Token ' + api_token,\n                    'Content-Type': 'application/json'\n                }\n            })\n            const list = await r.json()\n            setList(list.crosswords_grids)\n        } catch(e) {\n            window.location = '/'\n        }\n    }\n\n    useEffect(()=>{\n        (async () => (await loadGrids()))()     \n    }, [])\n\n    return (\n        <div className=\"container main-container\">\n            { !!list.length ? (list.map((e=>(\n                <><div style={{width: '100%'}}>\n                    <h3 style={{width: '100%'}}>{e.published ? <Link to={\"/grille/\"+e.id}>{e.title}</Link> : e.title} <Link to={\"/grille/\"+e.id+'/modifier'}><button class=\"float-right btn btn-primary\">Modifier</button></Link></h3>\n                    <span>{e.width}x{e.height} {e.published && <span class=\"badge bg-danger\">publié</span>}</span><br/>\n                    <span>Créée {(new Date(e.creation_date)).toLocaleDateString(\"fr-FR\")}</span><br/>\n                    <span>Modifiée {(new Date(e.modification_date)).toLocaleDateString(\"fr-FR\")}</span>\n                </div>\n                <hr/>\n                </>\n            )))): <h2>Pas de grilles</h2>\n            }\n        </div>\n    )\n}\n\nexport default OwnGrids"]},"metadata":{},"sourceType":"module"}